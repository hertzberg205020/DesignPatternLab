# 二維地圖冒險遊戲的設計需求

你要撰寫一個文字版的**二維地圖冒險遊戲**。使用**二維陣列**來呈現一個地圖 (Map)，地圖上每一個物件(Map Object) 都用一個符號表示。並用箭頭符號(↑→↓←)呈現主角 (Character) 的位置，以及主角面向的方位 (Direction)。 玩家藉由輸入指令來操控主角。這樣一來就能夠設計一個二維地圖冒險遊戲了!

## 主角、怪物及地圖實物

1. 地圖上有諸多寶物 (Treasure)，主角/怪物在移動後如果踏碰到這些寶物,可能會對主角/怪物造成傷害 (Damage) 或因此**改變主角/怪物的狀態 (State)**。

2. 地圖上會有怪物 (Monster)，**主角可以攻擊怪物並且殲滅所有怪物來取得冒險的最終勝利**。

3. 主角的初始生命值 (HP) 上限為 **300**，**主角每回合可以選擇「往一個方向移動一格」或者「朝著當前方向攻 擊」**(只有這兩種選擇)。

   a. 主角攻擊時，**將會朝著他當下面向的方位，清除其前方所有怪物**(意即當主角攻擊時，主角面前整條線上的所有怪物都會立刻死亡，但是攻擊不能穿越障礙物 (Obstacle))。

   b. 死亡後的怪物會從地圖上消失。

4. **觸碰 (Touch)**: 主角和怪物是整個地圖中唯二會移動的角色 (Role)，而當他朝著某一方位移動一格時,如果該方位前一格存在其他地圖物件，則將此稱之為「觸碰」。

   a. 觸碰時，由於觸碰者和被觸碰者不能站在同一格地圖格上，所以觸碰者**將會留在原地**。

5. 主角/怪物可能會在冒險中,獲得取多種狀態(例如:中毒、無敵、加速......等等)，但每一次**獲得新狀態時，都會直接覆寫舊的狀態**。

| 名 稱 | 符號 | 補充說明 |
|:---:|:---:|:---|
| 主 角 | ↑→↓← | 主角具有四個面向方位:上右下左，其對應的符號即為 ↑→↓← 。 |
| 障 礙 物 | □ | 當角色觸碰到障礙物時，角色將留在原地，不予移動。 |
| 寶 物 | x | 寶物裡將會存在各種不同內容，當主角或怪物觸碰到寶物時，寶物會從地圖上消失而主角/怪物將會依據寶物的不同內容而得到不同狀態。(請看以下寶物章節) |
| 怪 物 | M | 1. 怪物的攻擊範圍為怪物的上下左右各一格距離。如果怪物成功攻擊了主角，主角將會受到傷害並且減少生命值 50，如果此時主角的狀態並非「蓄力」或「加速」狀態，則會在受到傷害後立刻獲得無敵狀態(請看以下狀態章節)。<br>2. 怪物只擁有 1 點生命值(意即，滿血為 1 滴血)。 |

## 寶物

在生成地圖時，會隨機決定（依照機率）每個寶物的內容物。各寶物內容生成機率和作用如下表：

| 名稱 | 生成機率 | 觸碰作用 |
|:---|:---|:---|
| 無敵星星 (Super Star) | 0.1 | 觸碰者獲得無敵狀態 |
| 毒藥 (Poison) | 0.25 | 觸碰者獲得中毒狀態 |
| 加速藥水 (Accelerating Potion) | 0.2 | 觸碰者獲得加速狀態 |
| 補血罐 (Healing Potion) | 0.15 | 觸碰者獲得恢復狀態 |
| 惡魔果實 (Devil Fruit) | 0.1 | 觸碰者獲得混亂狀態 |
| 王者之印 (King's Rock) | 0.1 | 觸碰者獲得畚力狀態 |
| 任意門 (Dokodemo Door) | 0.1 | 觸碰者獲得瞬身狀態 |

## 狀態

當角色當前狀態的時效性結束後，如果其沒有特別說明，則角色狀態會回復成正常狀態。

| 名稱 | 時效 性 | 說明 |
|:---|:---|:---|
| 無敵 (Invincible) | 2回合 | 受到攻擊時並不會有任何生命損失 |
| 中毒 (Poisoned) | 3回合 | 每回合開始時失去15點生命值 |
| 加速 (Accelerated) | 3回合 | 每回合中可以進行「兩次動作」，若在期間遭受攻擊則立刻恢復至正常狀態 |
| 恢復 (Healing) | 5回合 | 每回合開始時恢復30點生命值，直到滿血。若滿血則立刻恢復至正常狀態 |
| 混亂 (Orderless) | 3回合 | 每回合隨機取得以下其中一種效果:1.只能進行上下移動 2.只能進行左右移動 (角色只能移動,不能選擇做其他操作) |
| 蓄力 (Stockpile) | 2回合 | 兩回合後進入爆發狀態,若在期間遭受攻擊則立刻恢復至正常狀態 |
| 爆發 (Erupting) | 3回合 | 角色的攻擊範圍擴充至「全地圖」，且攻擊行為變成「全場攻擊」: 每一次攻擊時都會攻擊到地圖中所有其餘角色,且攻擊力為50。二回合過後取得瞬身狀態。 |
| 瞬身 (Teleport) | 1回合 | 一回合後角色的位置將被隨機移動至任一空地 |

## 遊戲流程

1. 一開始生成地圖，隨機生成特定數量、位置的怪物和寶藏，寶藏的內容物依照各內容物的生成機率隨機指定，然後生成主角的位置以及隨機決定主角初始面向的方向。
2. 每一回合開始時先印出二維地圖（大小隨意設計，e.g., 10 x 10），以及印出主角的生命值及其狀態（初始狀態為**正常 (Normal State)**）。
3. 請玩家選擇欲讓主角執行的_動作_：
   a. **「往一個方向移動一格」**：詢問玩家要往哪個方向移動（上下左右），選擇之後就向該方位移動一格。
   b. **「攻擊」：**主角**朝著當前方向**執行攻擊。
4. 主角移動完之後，就換所有怪物們的回合：
   a. 如果主角沒有位於怪物的攻擊範圍之內的話，怪物將會自主決定要往哪一個方向移動一格，否則怪物會站在原地攻擊主角。
   b. 將怪物執行的詳細動作內容印出。
   c. 在每個怪物移動完之後，回合結束，回到步驟 2。

而遊戲目標是殺死所有的怪物！

**至於寶物跟怪物，在各個回合都有機率在隨機地點生成，隨意設計即可！**

## 設計需求

1. 在擴充新的狀態時，地圖/主角/怪物類別遵守 OCP，i.e., 不用修改地圖/主角/怪物類別程式，就能擴充新的狀態。
   a. 正常狀態和無敵狀態可被視為是核心的狀態類別，不在此要求中。
